<!DOCTYPE html>
<html lang="jp">
<head>
    <title>プロジェクトノート</title>
    <link rel="stylesheet" href="./css/style.css">
    <link rel="stylesheet" href="https://unpkg.com/modern-css-reset/dist/reset.min.css"/>
    <!--Google fonts-->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+JP:wght@100..900&display=swap" rel="stylesheet">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Syncopate&display=swap" rel="stylesheet">
</head>
<header>
    <font size="6"><a href="../index.html"><header-text>X-BUSINESS PROGRAM</header-text></a></font><br>
</header>
<body>
    <h1>プロジェクトノート</h1>
    <main>
     <h3><midashi>スケッチ＆概要</midashi></h3>
     <div>
     <img src="./images/pnote_sketch.jpg" width="60%"><br>
     今回は①競馬ゲームを制作することにしました。<br>
     ミニサイズでも競馬の魅力を感じられる作品を目標に、全力で制作していきます！<br>
     </div>
     <h3><midashi>プロセスメモ</midashi></h3>
     <div>
     <div class="box2">■：考えないといけないことや疑問など　●：具体的にやること　→：やったこと</div><br>
     ■ 作品の詳細を決める。<br>
     → モーターとギアを使って競走馬を動かす本体と、PCに映す着順掲示板を制作する。<br>
     ● 名前を決める。<br>
     → 数分の長考の結果「<kasen>卓上競馬ミニミニステークス</kasen>」に決定。いい名前だな。<br>
     <br>
     <font size="6">Python＆IoT</font><br>
     <br>
     ■ 着順掲示板をどのように再現するか考える。<br>
     → <kasen>Pygame</kasen>を使って背景画像を全画面で表示し、その上に文字を表示させる。<br>
     → 文字の色や配置を工夫することでかなりリアルなものができた！
     <img src="./images/keijiban_1.png" width="60%"><br>
     ● よりリアルに文字を表示させる。<br>
     → 表示するタイミングをずらしたり明滅させることでかなりリアルになった！<br>
     ● 音をつける。<br>
     → <kasen>Pygame.mixer</kasen>を使ってwavファイルを再生することに成功！<br>
     <br>
     ■ IoTをどのように組み込むか考える。<br>
     → QRコードを読み取ることでスタートできるようにする。<br>
     ● dfLinkを使ったQRコードのシステムを動作に組み込む。<br>
     → 端末keyでPythonと連携させ、サーバーのデータ値の変化を読み取ってもらうようにした。
     → 残念ながらうまく動作しなかった。（<kasen_ao>通信に問題？</kasen_ao>）<br>
     ● QRコードの読み取りでPygameの動作を開始できるようにがんばる。<br>
     → dfLInkからのデータを<kasen>リスト形式で定期的に取得する</kasen>ことで無事に動作した！<br>
     <br>
     <font size="6">Arduino＆回路</font><br>
     <br>
     ■ ArduinoとPythonをうまく接続できるのか？<br>
     ● Lチカで代用しながら連携できるか確かめる。<br>
     → Pythonの方で<kasen>シリアル入力＆特定のワードを送信</kasen>することで連携できた！<br>
     まとめるとこのような流れになります。<br>
     <img src="./images/prosses.PNG" width="60%">
     <br>
     ■ モーターを動かす回路を組む。<br>
     ● 購入する部品をリストアップする。<br>
     → DCモーター、モータードライバ（<kasen>TC78H653FTG</kasen>）、電池ボックスを購入する。<br>
     ● モータードライバを経由してDCモーターを動かす。<br>
     → 悲しいことにまったく動作しない。（DCモーターの不良ではなさそう...）<br>
     → モータードライバの電源電圧や回路も確認したが<kasen_ao>原因不明</kasen_ao>のため、新しいもの（<kasen>TB6612</kasen>）を購入した。<br>
     ● 改めて回路を組む。<br>
     → 下図の回路で無事にDCモーターが動作した！<br>
     <img src="./images/kairozu.png" width="60%"><br>
     ● 本体の歯車とつなげて動作するかテストする。<br>
     → うまく動作しなかった。どうやら始動する際の<kasen_ao>停動電流が不足</kasen_ao>しているのが原因のよう。<br>
     ● 電池を増やしてモーターが始動するか試してみる。<br>
     → PWMAの値を調整して電池を４本まで増やしたが動かないので、モーターを<kasen>ギアボックスタイプ</kasen>に変更しトルクを稼いでみる。<br>
     → 低速ながら単三電池２本でも始動した！うれしい！<br>
     ● テスト中に電池が異常に発熱してしまったので原因を探る。<br>
     → DCモーターが動作していないのにも関わらず電気が流れていたことが原因だと思われる。<br>
     → 安全のため動作時以外はスタンバイモードをオフに設定し、電池ボックスもスイッチ付きのものに変更した。<br>
     <br>
     <font size="6">本体</font><br>
     <br>
     ■ 本体をどのように制作するか考える。<br>
     → 外側の箱はレーザーカットでMDFを加工、歯車などは3Dプリンターで出力する。<br>
     ● サイズ感を決める。<br>
     → 下図のサイズ感をもとに製作する。<br>
     <img src="./images/size_sketch.png" width="60%"><br>
     ● 歯車をスケッチする。<br>
     → FusionのSuperGearアドオンでベースを設計し、カム部分をスケッチで追加した。<br>
     → 周辺パーツと一緒に試作品をプリント。問題なく動くので量産する。<br>
     <img src="./images/gear_1.png" width="60%"><br>
     ● レーザーカットするデータを作って組み立てる。<br>
     → 上述したものと近いサイズ感で作成したが、歯車どうしの間隔が空きすぎてしまった。<br>
     → 横幅を2cmほど小さくして再度組み立てた。かなりいい感じ！<br>
     <img src="./images/uma_2.png" width="60%"><br>
     ● カム部分の従動節が干渉してうまく回らない問題をなんとかする。<br>
     → 従動節が穴のサイズに対してやや小さくずれてしまうのが原因だった。<br>
     → 従動節を安定させるサポートパーツを取り付けることでスムーズに動いた！<br>
     <img src="./images/uma_1.png" width="60%"><br>
     <br>
     ■ 競走馬はなにで作る？<br>
     → できれば3Dプリントで立体的に作る！<br>
     → 時間があまりなさそうなので、簡易的にイラストを印刷して貼ってみる。<br>
     <img src="./images/uma_3.png" width="60%"><br>
     → 意外とかわいいのでこれでもいいか...の気持ちになっている。<br>
     </div>
     <h3><midashi>動画</midashi></h3>
     <div class="video">
        <iframe width="560" height="315" src="https://www.youtube.com/embed/dz2x7AKasA8?si=AwGv3q3Q__HlQfgz" title="YouTube video player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" referrerpolicy="strict-origin-when-cross-origin" allowfullscreen></iframe>
     </div>
     <h3><midashi>使用品</midashi></h3>
     <div>
     ▼ DCモーター<br>
     <a href="https://www.tamiya.com/japan/products/70188/index.html" target="_blank" class="btn_03">タミヤ ミニモーター標準ギヤボックス 8速</a><br>
     ▼ モータードライバ<br>
     <a href="https://akizukidenshi.com/catalog/g/g116947/" target="_blank" class="btn_03">TB6612モータードライバー ブレークアウトボードキット</a><br>
     ▼ 電池ボックス<br>
     <a href="https://www.elpadirect.jp/products/4901087197675/" target="_blank" class="btn_03">エルパ M-SC32NH</a>
     </div>
    </main>
     <br>
     <br>
</body>
</html>